{"version":3,"sources":["script.js"],"names":["FileLoader","options","this","selectors","document","querySelectorAll","init","uploadImage","removeImage","prototype","isValidMimetype","ext","$el","includes","querySelector","innerText","i","hasOwnProperty","$dropArea","addEventListener","drop","bind","dragover","dragleave","e","preventDefault","$image","reader","file","dataTransfer","files","type","closest","size","FileReader","onloadend","style","backgroundImage","result","readAsDataURL","borderColor","_this","$wrap","value","_this2","$button"],"mappings":"aAAA,IAAMA,WAAa,SAAUC,GACzBC,KAAKC,UAAYC,SAASC,iBAAiBJ,EAAQE,WACnDD,KAAKI,OACLJ,KAAKK,cACLL,KAAKM,eAGTR,WAAWS,UAAUC,gBAAkB,SAAUC,EAAKC,GAElD,MADkB,CAAC,aAAc,YAAa,YAAa,cAAe,gBAAiB,aAAc,cAC1FC,SAASF,KAIpBC,EAAIE,cAAc,UAAUC,UAAY,MAHxCH,EAAIE,cAAc,UAAUC,UAAY,8GAQhDf,WAAWS,UAAUH,KAAO,WACxB,IAAK,IAAIU,KAAKd,KAAKC,UACXD,KAAKC,UAAUc,eAAeD,MAC1BE,EAAYhB,KAAKC,UAAUa,IACrBG,iBAAiB,OAAQnB,WAAWS,UAAUW,KAAKC,KAAKH,IAClEA,EAAUC,iBAAiB,WAAYnB,WAAWS,UAAUa,SAASD,KAAKH,IAC1EA,EAAUC,iBAAiB,YAAanB,WAAWS,UAAUc,UAAUF,KAAKH,MAKxFlB,WAAWS,UAAUW,KAAO,SAAUI,GAClCA,EAAEC,iBACF,IAIQC,EACAC,EALJC,EAAOJ,EAAEK,aAAaC,MAAM,GACtB9B,WAAWS,UAAUC,gBAAgBkB,EAAKG,KAAM7B,KAAK8B,QAAQ,qBAEnE9B,KAAKa,UAAYa,EAAKG,KAAO,MAAQH,EAAKK,KAAO,IAAO,MACpDP,EAASxB,KAAK8B,QAAQ,kBAAkBlB,cAAc,WACtDa,EAAS,IAAIO,YACVC,UAAY,WACfT,EAAOU,MAAMC,gBAAkB,OAASV,EAAOW,OAAS,KAE5DX,EAAOY,cAAcX,IAEzB1B,KAAKkC,MAAMI,YAAc,WAG7BxC,WAAWS,UAAUa,SAAW,SAAUE,GACtCA,EAAEC,iBACFvB,KAAKkC,MAAMI,YAAc,UAG7BxC,WAAWS,UAAUc,UAAY,SAAUC,GACvCA,EAAEC,iBACFvB,KAAKkC,MAAMI,YAAc,WAG7BxC,WAAWS,UAAUD,YAAc,WAAY,IAClCQ,EADkCyB,EAAAvC,KAC3C,IAASc,KAAKd,KAAKC,UACXD,KAAKC,UAAUc,eAAeD,IAAI,WAClC,IAAI0B,EAAQD,EAAKtC,UAAUa,GAAGgB,QAAQ,kBAClBU,EAAM5B,cAAc,iBAC1BK,iBAAiB,QAAS,WACpCuB,EAAM5B,cAAc,UAAUC,UAAY,GAC1C2B,EAAM5B,cAAc,WAAWC,UAAY,eAC3C2B,EAAM5B,cAAc,UAAUsB,MAAMC,gBAAkB,syDACtDK,EAAM5B,cAAc,SAAS6B,MAAQ,KAPP,IAa9C3C,WAAWS,UAAUF,YAAc,WAAY,IAClCS,EADkC4B,EAAA1C,KAC3C,IAASc,KAAKd,KAAKC,UACXD,KAAKC,UAAUc,eAAeD,IAAI,WAClC,IAAI6B,EAAUD,EAAKzC,UAAUa,GACzB0B,EAAQG,EAAQb,QAAQ,kBACxBN,EAASgB,EAAM5B,cAAc,UACpB4B,EAAM5B,cAAc,SAC1BK,iBAAiB,SAAU,WAC9B,IAIQQ,EAJJC,EAAO1B,KAAK4B,MAAM,GACZ9B,WAAWS,UAAUC,gBAAgBkB,EAAKG,KAAMW,KAEtDG,EAAQ9B,UAAYa,EAAKG,KAAO,MAAQH,EAAKK,KAAO,IAAO,OACvDN,EAAS,IAAIO,YACVC,UAAY,WACfT,EAAOU,MAAMC,gBAAkB,OAASV,EAAOW,OAAS,KAE5DX,EAAOY,cAAcX,MAdK,IAqB9C,IAAI5B,WAAW,CACXG,UAAW","file":"script.min.js","sourcesContent":["const FileLoader = function (options) {\n    this.selectors = document.querySelectorAll(options.selectors);\n    this.init();\n    this.uploadImage();\n    this.removeImage();\n}\n\nFileLoader.prototype.isValidMimetype = function (ext, $el) {\n    const mimetypes = ['image/jpeg', 'image/png', 'image/gif', 'image/pjpeg', 'image/svg+xml', 'image/webp', 'image/tiff'];\n    if (!mimetypes.includes(ext)) {\n        $el.querySelector('.error').innerText = 'You tried to upload not supported format. Available formats: jpg, png, jpeg, gif, svg, webp. Bad format.!'\n        return false;\n    } else {\n        $el.querySelector('.error').innerText = '';\n        return true;\n    }\n}\n\nFileLoader.prototype.init = function () {\n    for (let i in this.selectors) {\n        if (this.selectors.hasOwnProperty(i)) {\n            let $dropArea = this.selectors[i];\n            $dropArea.addEventListener('drop', FileLoader.prototype.drop.bind($dropArea));\n            $dropArea.addEventListener('dragover', FileLoader.prototype.dragover.bind($dropArea));\n            $dropArea.addEventListener('dragleave', FileLoader.prototype.dragleave.bind($dropArea));\n        }\n    }\n}\n\nFileLoader.prototype.drop = function (e) {\n    e.preventDefault();\n    let file = e.dataTransfer.files[0];\n    let res = FileLoader.prototype.isValidMimetype(file.type, this.closest('.file-uploader'));\n    if (res) {\n        this.innerText = file.type + ' - ' + file.size / 1000 + ' KB';\n        let $image = this.closest('.file-uploader').querySelector('.image');\n        let reader = new FileReader();\n        reader.onloadend = function() {\n            $image.style.backgroundImage = 'url(' + reader.result + ')';\n        }\n        reader.readAsDataURL(file);\n    }\n    this.style.borderColor = '#ced4da';\n}\n\nFileLoader.prototype.dragover = function (e) {\n    e.preventDefault();\n    this.style.borderColor = 'orange';\n}\n\nFileLoader.prototype.dragleave = function (e) {\n    e.preventDefault();\n    this.style.borderColor = '#ced4da';\n}\n\nFileLoader.prototype.removeImage = function () {\n    for (let i in this.selectors) {\n        if (this.selectors.hasOwnProperty(i)) {\n            let $wrap = this.selectors[i].closest('.file-uploader');\n            let $removeButton = $wrap.querySelector('.remove-image');\n            $removeButton.addEventListener('click', function () {\n                $wrap.querySelector('.error').innerText = '';\n                $wrap.querySelector('.button').innerText = 'Select image';\n                $wrap.querySelector('.image').style.backgroundImage = 'url(data:image/svg+xml;base64,PHN2ZyBpZD0iQ2FwYV8xIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MTIgNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGc+PHBhdGggZD0ibTI1NiAyMDUuNzczYy04LjM5NiAwLTE2LjMxMSAyLjA4MS0yMy4yNzQgNS43MzlsNjcuNzYyIDY3Ljc2MmMzLjY1OC02Ljk2MyA1LjczOS0xNC44NzggNS43MzktMjMuMjc0IDAtMjcuNjk1LTIyLjUzMi01MC4yMjctNTAuMjI3LTUwLjIyN3oiLz48cGF0aCBkPSJtMTczLjgzOCAxNTIuNjI1aDExLjYwOGwyMC4xMjUtMzIuMTI1aDEwMC44NTdsMjAuMTI1IDMyLjEyNWg5NS4wNzF2MjI1LjgxMmgtMjEuOTc0bDQ3LjY1OSA0Ny42NTljNDEuODE3LTQ2LjkwOSA2NC42OTEtMTA2Ljc0MSA2NC42OTEtMTcwLjA5NiAwLTY4LjM4LTI2LjYyOS0xMzIuNjY3LTc0Ljk4LTE4MS4wMi00OC4zNTMtNDguMzUxLTExMi42NC03NC45OC0xODEuMDItNzQuOTgtNjMuMzU1IDAtMTIzLjE4NyAyMi44NzQtMTcwLjA5NyA2NC42OXoiLz48cGF0aCBkPSJtMjU2IDMwNi4yMjdjOC4zOTYgMCAxNi4zMTEtMi4wODEgMjMuMjc0LTUuNzM5bC02Ny43NjItNjcuNzYyYy0zLjY1OCA2Ljk2My01LjczOSAxNC44NzgtNS43MzkgMjMuMjc0IDAgMjcuNjk1IDIyLjUzMiA1MC4yMjcgNTAuMjI3IDUwLjIyN3oiLz48cGF0aCBkPSJtMTIwLjM3NSAzNDguNDM4aDIwNi44NWwtMjYuMTI2LTI2LjEyNmMtMTIuODYxIDguNzc1LTI4LjM4OSAxMy45MTUtNDUuMDk4IDEzLjkxNS00NC4yMzcgMC04MC4yMjctMzUuOTktODAuMjI3LTgwLjIyNyAwLTE2LjcwOSA1LjE0MS0zMi4yMzggMTMuOTE1LTQ1LjA5OGwtMjguMjc3LTI4LjI3N2gtNDEuMDM3eiIvPjxwYXRoIGQ9Im0zNTcuMjI1IDM3OC40MzhoLTI2Ni44NXYtMjI1LjgxM2g0MS4wMzdsLTY2LjcyMi02Ni43MjJjLTQxLjgxNiA0Ni45MS02NC42OSAxMDYuNzQyLTY0LjY5IDE3MC4wOTcgMCA2OC4zOCAyNi42MjkgMTMyLjY2NyA3NC45OCAxODEuMDIgNDguMzUzIDQ4LjM1MSAxMTIuNjQgNzQuOTggMTgxLjAyIDc0Ljk4IDYzLjM1NSAwIDEyMy4xODctMjIuODc0IDE3MC4wOTctNjQuNjl6Ii8+PHBhdGggZD0ibTM5MS42MjUgMTgyLjYyNWgtODEuNjc5bC0yMC4xMjUtMzIuMTI1aC02Ny42NDNsLTE5LjQzOCAzMS4wMjggOC4xNjEgOC4xNjFjMTIuODYxLTguNzc1IDI4LjM4OS0xMy45MTUgNDUuMDk4LTEzLjkxNSA0NC4yMzcgMCA4MC4yMjcgMzUuOTkgODAuMjI3IDgwLjIyNyAwIDE2LjcwOS01LjE0MSAzMi4yMzgtMTMuOTE1IDQ1LjA5OGw0Ny4zMzkgNDcuMzM5aDIxLjk3NXoiLz48L2c+PC9zdmc+)';\n                $wrap.querySelector('input').value = '';\n            });\n        }\n    }\n}\n\nFileLoader.prototype.uploadImage = function () {\n    for (let i in this.selectors) {\n        if (this.selectors.hasOwnProperty(i)) {\n            let $button = this.selectors[i];\n            let $wrap = $button.closest('.file-uploader');\n            let $image = $wrap.querySelector('.image');\n            let $input = $wrap.querySelector('input');\n            $input.addEventListener('change', function () {\n                let file = this.files[0];\n                let res = FileLoader.prototype.isValidMimetype(file.type, $wrap);\n                if (res) {\n                    $button.innerText = file.type + ' - ' + file.size / 1000 + ' KB';\n                    let reader = new FileReader();\n                    reader.onloadend = function() {\n                        $image.style.backgroundImage = 'url(' + reader.result + ')';\n                    }\n                    reader.readAsDataURL(file);\n                }\n            });\n        }\n    }\n}\n\nnew FileLoader({\n    selectors: '.file-uploader .button'\n});\n"]}