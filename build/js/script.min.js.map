{"version":3,"sources":["script.js"],"names":["FileLoader","options","this","selectors","document","querySelectorAll","init","uploadImage","removeImage","prototype","isValidFileSize","fileSize","$el","querySelector","innerText","isValidMimetype","ext","includes","i","hasOwnProperty","$dropArea","addEventListener","drop","bind","dragover","dragleave","e","preventDefault","file","dataTransfer","files","style","borderColor","size","closest","type","$image","reader","FileReader","onloadend","backgroundImage","result","readAsDataURL","_this","$wrap","value","_this2","$button"],"mappings":"aAAA,IAAMA,WAAa,SAAUC,GACzBC,KAAKC,UAAYC,SAASC,iBAAiBJ,EAAQE,WACnDD,KAAKI,OACLJ,KAAKK,cACLL,KAAKM,eAGTR,WAAWS,UAAUC,gBAAkB,SAAUC,EAAUC,GAEvD,OADa,QACFD,IACPC,EAAIC,cAAc,UAAUC,UAAY,gEAGxCF,EAAIC,cAAc,UAAUC,UAAY,KAKhDd,WAAWS,UAAUM,gBAAkB,SAAUC,EAAKJ,GAElD,MADkB,CAAC,aAAc,YAAa,YAAa,cAAe,gBAAiB,aAAc,cAC1FK,SAASD,KAIpBJ,EAAIC,cAAc,UAAUC,UAAY,MAHxCF,EAAIC,cAAc,UAAUC,UAAY,8GAQhDd,WAAWS,UAAUH,KAAO,WACxB,IAAK,IAAIY,KAAKhB,KAAKC,UACXD,KAAKC,UAAUgB,eAAeD,MAC1BE,EAAYlB,KAAKC,UAAUe,IACrBG,iBAAiB,OAAQrB,WAAWS,UAAUa,KAAKC,KAAKH,IAClEA,EAAUC,iBAAiB,WAAYrB,WAAWS,UAAUe,SAASD,KAAKH,IAC1EA,EAAUC,iBAAiB,YAAarB,WAAWS,UAAUgB,UAAUF,KAAKH,MAKxFpB,WAAWS,UAAUa,KAAO,SAAUI,GAClCA,EAAEC,iBACEC,EAAOF,EAAEG,aAAaC,MAAM,GAEhC,GADA5B,KAAK6B,MAAMC,YAAc,UACrBhC,WAAWS,UAAUC,gBAAgBkB,EAAKK,KAAM/B,KAAKgC,QAAQ,mBAC7D,OAAO,EAEX,IAAKlC,WAAWS,UAAUM,gBAAgBa,EAAKO,KAAMjC,KAAKgC,QAAQ,mBAC9D,OAAO,EAEXhC,KAAKY,UAAYc,EAAKO,KAAO,MAAQP,EAAKK,KAAO,IAAO,MACxD,IAAIG,EAASlC,KAAKgC,QAAQ,kBAAkBrB,cAAc,UACtDwB,EAAS,IAAIC,WACjBD,EAAOE,UAAY,WACfH,EAAOL,MAAMS,gBAAkB,OAASH,EAAOI,OAAS,KAE5DJ,EAAOK,cAAcd,IAGzB5B,WAAWS,UAAUe,SAAW,SAAUE,GACtCA,EAAEC,iBACFzB,KAAK6B,MAAMC,YAAc,UAG7BhC,WAAWS,UAAUgB,UAAY,SAAUC,GACvCA,EAAEC,iBACFzB,KAAK6B,MAAMC,YAAc,WAG7BhC,WAAWS,UAAUD,YAAc,WAAY,IAClCU,EADkCyB,EAAAzC,KAC3C,IAASgB,KAAKhB,KAAKC,UACXD,KAAKC,UAAUgB,eAAeD,IAAI,WAClC,IAAI0B,EAAQD,EAAKxC,UAAUe,GAAGgB,QAAQ,kBAClBU,EAAM/B,cAAc,iBAC1BQ,iBAAiB,QAAS,WACpCuB,EAAM/B,cAAc,UAAUC,UAAY,GAC1C8B,EAAM/B,cAAc,WAAWC,UAAY,eAC3C8B,EAAM/B,cAAc,UAAUkB,MAAMS,gBAAkB,syDACtDI,EAAM/B,cAAc,SAASgC,MAAQ,KAPP,IAa9C7C,WAAWS,UAAUF,YAAc,WAAY,IAClCW,EADkC4B,EAAA5C,KAC3C,IAASgB,KAAKhB,KAAKC,UACXD,KAAKC,UAAUgB,eAAeD,IAAI,WAClC,IAAI6B,EAAUD,EAAK3C,UAAUe,GACzB0B,EAAQG,EAAQb,QAAQ,kBACxBE,EAASQ,EAAM/B,cAAc,UACpB+B,EAAM/B,cAAc,SAC1BQ,iBAAiB,SAAU,WAC9B,IAAIO,EAAO1B,KAAK4B,MAAM,GACtB,IAAK9B,WAAWS,UAAUC,gBAAgBkB,EAAKK,KAAMW,GACjD,OAAO,EAEX,IAAK5C,WAAWS,UAAUM,gBAAgBa,EAAKO,KAAMS,GACjD,OAAO,EAEXG,EAAQjC,UAAYc,EAAKO,KAAO,MAAQP,EAAKK,KAAO,IAAO,MAC3D,IAAII,EAAS,IAAIC,WACjBD,EAAOE,UAAY,WACfH,EAAOL,MAAMS,gBAAkB,OAASH,EAAOI,OAAS,KAE5DJ,EAAOK,cAAcd,KAlBS,IAwB9C,IAAI5B,WAAW,CACXG,UAAW","file":"script.min.js","sourcesContent":["const FileLoader = function (options) {\n    this.selectors = document.querySelectorAll(options.selectors);\n    this.init();\n    this.uploadImage();\n    this.removeImage();\n}\n\nFileLoader.prototype.isValidFileSize = function (fileSize, $el) {\n    const size = 1024 * 1024 * 2;\n    if (size < fileSize) {\n        $el.querySelector('.error').innerText = 'Make sure your total file size for upload is not over 2MB.'\n        return false;\n    } else {\n        $el.querySelector('.error').innerText = '';\n        return true;\n    }\n}\n\nFileLoader.prototype.isValidMimetype = function (ext, $el) {\n    const mimetypes = ['image/jpeg', 'image/png', 'image/gif', 'image/pjpeg', 'image/svg+xml', 'image/webp', 'image/tiff'];\n    if (!mimetypes.includes(ext)) {\n        $el.querySelector('.error').innerText = 'You tried to upload not supported format. Available formats: jpg, png, jpeg, gif, svg, webp. Bad format.!'\n        return false;\n    } else {\n        $el.querySelector('.error').innerText = '';\n        return true;\n    }\n}\n\nFileLoader.prototype.init = function () {\n    for (let i in this.selectors) {\n        if (this.selectors.hasOwnProperty(i)) {\n            let $dropArea = this.selectors[i];\n            $dropArea.addEventListener('drop', FileLoader.prototype.drop.bind($dropArea));\n            $dropArea.addEventListener('dragover', FileLoader.prototype.dragover.bind($dropArea));\n            $dropArea.addEventListener('dragleave', FileLoader.prototype.dragleave.bind($dropArea));\n        }\n    }\n}\n\nFileLoader.prototype.drop = function (e) {\n    e.preventDefault();\n    let file = e.dataTransfer.files[0];\n    this.style.borderColor = '#ced4da';\n    if (FileLoader.prototype.isValidFileSize(file.size, this.closest('.file-uploader'))) {\n        return false;\n    }\n    if (!FileLoader.prototype.isValidMimetype(file.type, this.closest('.file-uploader'))) {\n        return false;\n    }\n    this.innerText = file.type + ' - ' + file.size / 1000 + ' KB';\n    let $image = this.closest('.file-uploader').querySelector('.image');\n    let reader = new FileReader();\n    reader.onloadend = function() {\n        $image.style.backgroundImage = 'url(' + reader.result + ')';\n    }\n    reader.readAsDataURL(file);\n}\n\nFileLoader.prototype.dragover = function (e) {\n    e.preventDefault();\n    this.style.borderColor = 'orange';\n}\n\nFileLoader.prototype.dragleave = function (e) {\n    e.preventDefault();\n    this.style.borderColor = '#ced4da';\n}\n\nFileLoader.prototype.removeImage = function () {\n    for (let i in this.selectors) {\n        if (this.selectors.hasOwnProperty(i)) {\n            let $wrap = this.selectors[i].closest('.file-uploader');\n            let $removeButton = $wrap.querySelector('.remove-image');\n            $removeButton.addEventListener('click', function () {\n                $wrap.querySelector('.error').innerText = '';\n                $wrap.querySelector('.button').innerText = 'Select image';\n                $wrap.querySelector('.image').style.backgroundImage = 'url(data:image/svg+xml;base64,PHN2ZyBpZD0iQ2FwYV8xIiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCA1MTIgNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHdpZHRoPSI1MTIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGc+PHBhdGggZD0ibTI1NiAyMDUuNzczYy04LjM5NiAwLTE2LjMxMSAyLjA4MS0yMy4yNzQgNS43MzlsNjcuNzYyIDY3Ljc2MmMzLjY1OC02Ljk2MyA1LjczOS0xNC44NzggNS43MzktMjMuMjc0IDAtMjcuNjk1LTIyLjUzMi01MC4yMjctNTAuMjI3LTUwLjIyN3oiLz48cGF0aCBkPSJtMTczLjgzOCAxNTIuNjI1aDExLjYwOGwyMC4xMjUtMzIuMTI1aDEwMC44NTdsMjAuMTI1IDMyLjEyNWg5NS4wNzF2MjI1LjgxMmgtMjEuOTc0bDQ3LjY1OSA0Ny42NTljNDEuODE3LTQ2LjkwOSA2NC42OTEtMTA2Ljc0MSA2NC42OTEtMTcwLjA5NiAwLTY4LjM4LTI2LjYyOS0xMzIuNjY3LTc0Ljk4LTE4MS4wMi00OC4zNTMtNDguMzUxLTExMi42NC03NC45OC0xODEuMDItNzQuOTgtNjMuMzU1IDAtMTIzLjE4NyAyMi44NzQtMTcwLjA5NyA2NC42OXoiLz48cGF0aCBkPSJtMjU2IDMwNi4yMjdjOC4zOTYgMCAxNi4zMTEtMi4wODEgMjMuMjc0LTUuNzM5bC02Ny43NjItNjcuNzYyYy0zLjY1OCA2Ljk2My01LjczOSAxNC44NzgtNS43MzkgMjMuMjc0IDAgMjcuNjk1IDIyLjUzMiA1MC4yMjcgNTAuMjI3IDUwLjIyN3oiLz48cGF0aCBkPSJtMTIwLjM3NSAzNDguNDM4aDIwNi44NWwtMjYuMTI2LTI2LjEyNmMtMTIuODYxIDguNzc1LTI4LjM4OSAxMy45MTUtNDUuMDk4IDEzLjkxNS00NC4yMzcgMC04MC4yMjctMzUuOTktODAuMjI3LTgwLjIyNyAwLTE2LjcwOSA1LjE0MS0zMi4yMzggMTMuOTE1LTQ1LjA5OGwtMjguMjc3LTI4LjI3N2gtNDEuMDM3eiIvPjxwYXRoIGQ9Im0zNTcuMjI1IDM3OC40MzhoLTI2Ni44NXYtMjI1LjgxM2g0MS4wMzdsLTY2LjcyMi02Ni43MjJjLTQxLjgxNiA0Ni45MS02NC42OSAxMDYuNzQyLTY0LjY5IDE3MC4wOTcgMCA2OC4zOCAyNi42MjkgMTMyLjY2NyA3NC45OCAxODEuMDIgNDguMzUzIDQ4LjM1MSAxMTIuNjQgNzQuOTggMTgxLjAyIDc0Ljk4IDYzLjM1NSAwIDEyMy4xODctMjIuODc0IDE3MC4wOTctNjQuNjl6Ii8+PHBhdGggZD0ibTM5MS42MjUgMTgyLjYyNWgtODEuNjc5bC0yMC4xMjUtMzIuMTI1aC02Ny42NDNsLTE5LjQzOCAzMS4wMjggOC4xNjEgOC4xNjFjMTIuODYxLTguNzc1IDI4LjM4OS0xMy45MTUgNDUuMDk4LTEzLjkxNSA0NC4yMzcgMCA4MC4yMjcgMzUuOTkgODAuMjI3IDgwLjIyNyAwIDE2LjcwOS01LjE0MSAzMi4yMzgtMTMuOTE1IDQ1LjA5OGw0Ny4zMzkgNDcuMzM5aDIxLjk3NXoiLz48L2c+PC9zdmc+)';\n                $wrap.querySelector('input').value = '';\n            });\n        }\n    }\n}\n\nFileLoader.prototype.uploadImage = function () {\n    for (let i in this.selectors) {\n        if (this.selectors.hasOwnProperty(i)) {\n            let $button = this.selectors[i];\n            let $wrap = $button.closest('.file-uploader');\n            let $image = $wrap.querySelector('.image');\n            let $input = $wrap.querySelector('input');\n            $input.addEventListener('change', function () {\n                let file = this.files[0];\n                if (!FileLoader.prototype.isValidFileSize(file.size, $wrap)) {\n                    return false;\n                }\n                if (!FileLoader.prototype.isValidMimetype(file.type, $wrap)) {\n                    return false;\n                }\n                $button.innerText = file.type + ' - ' + file.size / 1000 + ' KB';\n                let reader = new FileReader();\n                reader.onloadend = function() {\n                    $image.style.backgroundImage = 'url(' + reader.result + ')';\n                }\n                reader.readAsDataURL(file);\n            });\n        }\n    }\n}\n\nnew FileLoader({\n    selectors: '.file-uploader .button'\n});\n"]}